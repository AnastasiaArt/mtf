let c=document.createElement("canvas").getContext("2d"),containerCanvas=document.getElementById("animateWind"),postctx=containerCanvas.appendChild(document.createElement("canvas")).getContext("2d"),canvas=c.canvas,vertices=[],vertexCount=1e4,vertexSize=2,oceanWidth=204,oceanHeight=-80,gridSize=6,waveSize=32,perspective=150,depth=vertexCount/oceanWidth*gridSize,frame=0,{sin,cos,tan,PI}=Math,loop=()=>{let e=sin(frame/100)*PI/20,t=sin(frame/50)*PI/10;frame++,postctx.canvas.width===postctx.canvas.offsetWidth&&postctx.canvas.height===postctx.canvas.offsetHeight||(postctx.canvas.width=canvas.width=postctx.canvas.offsetWidth,postctx.canvas.height=canvas.height=containerCanvas.offsetHeight),c.fillStyle="#001C24",c.fillRect(0,0,canvas.width,canvas.height),c.save(),c.translate(canvas.width/2,canvas.height/2),c.beginPath(),vertices.forEach(((a,i)=>{let s,n,o,r=a[0]-frame%(2*gridSize),l=a[2]-2*frame%gridSize+(i%2==0?gridSize/2:0),v=cos(frame/45+r/50)-sin(frame/20+l/50)+sin(frame/30+l*r/1e4),h=a[1]+v*waveSize,p=Math.max(0,1-Math.sqrt(r**2+l**2)/depth);h-=oceanHeight,s=r,n=h,o=l,s=r*cos(e)+l*sin(e),o=-r*sin(e)+l*cos(e),r=s,h=n,l=o,s=r*cos(e)-h*sin(e),n=r*sin(e)+h*cos(e),r=s,h=n,l=o,n=h*cos(t)-l*sin(t),o=h*sin(t)+l*cos(t),r=s,h=n,l=o,r/=l/perspective,h/=l/perspective,p<.01||l<0||(c.globalAlpha=p,c.fillStyle=`hsl(${180+20*v}deg, 100%, 50%)`,c.fillRect(r-p*vertexSize/2,h-p*vertexSize/2,p*vertexSize,p*vertexSize),c.globalAlpha=1)})),c.restore(),postctx.drawImage(canvas,0,0),postctx.fillStyle="#003949",postctx.strokeStyle="#003949",postctx.globalCompositeOperation="screen",postctx.filter="blur(16px)",postctx.drawImage(canvas,0,0),postctx.filter="blur(0)",postctx.globalCompositeOperation="source-over",requestAnimationFrame(loop)};for(let e=0;e<vertexCount;e++){let t=e%oceanWidth,a=0,c=e/oceanWidth>>0,i=oceanWidth/2;vertices.push([(-i+t)*gridSize,a*gridSize,c*gridSize])}loop();